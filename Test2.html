<!DOCTYPE html>
<html>
<head>
    <title>üß™ –¢–µ—Å—Ç –§–µ–Ω–∏–∫—Å-–ü–æ–∏—Å–∫–∞ (–£–ø—Ä–æ—â—ë–Ω–Ω—ã–π)</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f0f0f0; }
        .test { background: white; padding: 20px; margin: 10px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        button { background: #4CAF50; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px; }
        button:hover { background: #45a049; }
        .success { color: green; padding: 10px; background: #e8f5e9; border-left: 4px solid green; }
        .error { color: red; padding: 10px; background: #ffebee; border-left: 4px solid red; }
        .loading { color: orange; }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã –§–µ–Ω–∏–∫—Å-–ü–æ–∏—Å–∫–∞</h1>
    
    <div class="test">
        <h3>1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ phoenix.js</h3>
        <button onclick="testLoad()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É</button>
        <div id="result1">–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É</div>
    </div>
    
    <div class="test">
        <h3>2. –¢–µ—Å—Ç –∫–ª–∞—Å—Å–∞ PhoenixSearch</h3>
        <button onclick="testClass()">–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç</button>
        <div id="result2">–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É</div>
    </div>
    
    <div class="test">
        <h3>3. –¢–µ—Å—Ç API –ø–æ–∏—Å–∫–∞</h3>
        <button onclick="testAPI()">–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç</button>
        <div id="result3">–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É</div>
    </div>
    
    <div class="test">
        <h3>4. –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç</h3>
        <button onclick="runAllTests()">‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å –í–°–ï —Ç–µ—Å—Ç—ã</button>
        <div id="result4">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
    </div>

    <script>
    // ============= –ü–†–û–°–¢–û–ô –¢–ï–°–¢ =============
    
    async function testLoad() {
        const div = document.getElementById('result1');
        div.innerHTML = '<span class="loading">üîÑ –ü—Ä–æ–≤–µ—Ä—è—é –∑–∞–≥—Ä—É–∑–∫—É phoenix.js...</span>';
        
        try {
            // –ü—Ä–æ–±—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å phoenix.js
            const script = document.createElement('script');
            script.src = 'https://phoenix-time-inc.github.io/phoenix-search-prototype/phoenix.js';
            document.head.appendChild(script);
            
            // –ñ–¥—ë–º 2 —Å–µ–∫—É–Ω–¥—ã
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            if (typeof PhoenixSearch === 'undefined') {
                div.innerHTML = '<div class="error">‚ùå –ö–ª–∞—Å—Å PhoenixSearch –ù–ï –∑–∞–≥—Ä—É–∑–∏–ª—Å—è</div>';
                return false;
            }
            
            div.innerHTML = '<div class="success">‚úÖ –ö–ª–∞—Å—Å PhoenixSearch –∑–∞–≥—Ä—É–∂–µ–Ω!</div>';
            return true;
            
        } catch (error) {
            div.innerHTML = `<div class="error">‚ùå –û—à–∏–±–∫–∞: ${error.message}</div>`;
            return false;
        }
    }
    
    async function testClass() {
        const div = document.getElementById('result2');
        div.innerHTML = '<span class="loading">üîÑ –¢–µ—Å—Ç–∏—Ä—É—é –∫–ª–∞—Å—Å...</span>';
        
        try {
            // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∏–º –∑–∞–≥—Ä—É–∑–∫—É
            if (typeof PhoenixSearch === 'undefined') {
                div.innerHTML = '<div class="error">‚ùå –°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏ –∫–ª–∞—Å—Å (—Ç–µ—Å—Ç 1)</div>';
                return false;
            }
            
            // –°–æ–∑–¥–∞—ë–º —ç–∫–∑–µ–º–ø–ª—è—Ä
            const phoenix = new PhoenixSearch();
            console.log('–¢–µ—Å—Ç: —Å–æ–∑–¥–∞–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä', phoenix);
            
            // –î–µ–ª–∞–µ–º –ø–æ–∏—Å–∫
            const result = await phoenix.search('–¢–µ—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å');
            console.log('–¢–µ—Å—Ç: –ø–æ–ª—É—á–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç', result);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç–≤–µ—Ç–∞
            if (result.essence && result.type && result.collective) {
                div.innerHTML = `
                    <div class="success">
                        ‚úÖ –ö–ª–∞—Å—Å —Ä–∞–±–æ—Ç–∞–µ—Ç!<br>
                        –¢–∏–ø: ${result.type}<br>
                        –ö–æ–ª–ª–µ–∫—Ç–∏–≤–Ω–∞—è –º—É–¥—Ä–æ—Å—Ç—å: ${result.collective.peopleCount} —á–µ–ª–æ–≤–µ–∫<br>
                        <small>${result.essence.substring(0, 80)}...</small>
                    </div>
                `;
                return true;
            } else {
                div.innerHTML = '<div class="error">‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞</div>';
                return false;
            }
            
        } catch (error) {
            div.innerHTML = `<div class="error">‚ùå –û—à–∏–±–∫–∞ –∫–ª–∞—Å—Å–∞: ${error.message}</div>`;
            return false;
        }
    }
    
    async function testAPI() {
        const div = document.getElementById('result3');
        div.innerHTML = '<span class="loading">üîÑ –¢–µ—Å—Ç–∏—Ä—É—é API...</span>';
        
        try {
            const response = await fetch('https://phoenix-search-prototype.vercel.app/api/search', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({query: '–¢–µ—Å—Ç API'})
            });
            
            const data = await response.json();
            
            if (data.success) {
                div.innerHTML = `
                    <div class="success">
                        ‚úÖ API —Ä–∞–±–æ—Ç–∞–µ—Ç!<br>
                        –°—Ç–∞—Ç—É—Å: ${response.status}<br>
                        –ò—Å—Ç–æ—á–Ω–∏–∫: ${data.source}<br>
                        –¢–∏–ø: ${data.response.type}
                    </div>
                `;
                return true;
            } else {
                div.innerHTML = `<div class="error">‚ùå API –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É: ${data.error}</div>`;
                return false;
            }
            
        } catch (error) {
            div.innerHTML = `<div class="error">‚ùå –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ${error.message}</div>`;
            return false;
        }
    }
    
    async function runAllTests() {
        const div = document.getElementById('result4');
        div.innerHTML = '<span class="loading">üöÄ –ó–∞–ø—É—Å–∫–∞—é –≤—Å–µ —Ç–µ—Å—Ç—ã...</span>';
        
        let results = [];
        
        // –¢–µ—Å—Ç 1: –ó–∞–≥—Ä—É–∑–∫–∞
        div.innerHTML += '<br>1. –ó–∞–≥—Ä—É–∑–∫–∞ –∫–ª–∞—Å—Å–∞...';
        results[0] = await testLoad();
        
        // –¢–µ—Å—Ç 2: –ö–ª–∞—Å—Å
        if (results[0]) {
            div.innerHTML += '<br>2. –¢–µ—Å—Ç –∫–ª–∞—Å—Å–∞...';
            results[1] = await testClass();
        } else {
            div.innerHTML += '<br>2. ‚ùå –ü—Ä–æ–ø—É—â–µ–Ω (–Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω)';
            results[1] = false;
        }
        
        // –¢–µ—Å—Ç 3: API
        div.innerHTML += '<br>3. –¢–µ—Å—Ç API...';
        results[2] = await testAPI();
        
        // –ò—Ç–æ–≥
        const passed = results.filter(r => r === true).length;
        const total = results.filter(r => r !== null).length;
        
        div.innerHTML += `<br><br><strong>üìä –ò—Ç–æ–≥: ${passed}/${total} —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ</strong>`;
        
        if (passed === total) {
            div.innerHTML += '<br><div class="success">üéâ –í–°–Å –†–ê–ë–û–¢–ê–ï–¢!</div>';
        } else {
            div.innerHTML += '<br><div class="error">‚ö†Ô∏è –ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã</div>';
        }
    }
    
    console.log('–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
    </script>
</body>
</html>
